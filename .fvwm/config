
###########
# 1: Functions
#
# Fvwm can use custom functions for various tasks.
# The syntax for defining a function named FunctionName is:
#
#   DestroyFunc FunctionName
#   AddToFunc FunctionName
#   + I [Action to do Immediately]
#   + C [Action to do on a Mouse Click]
#   + D [Action to do on a Mouse Double Click]
#   + H [Action to do on a Mouse Hold]
#   + M [Action to do on a Mouse Motion]
###########

# Start Function
#
# The start function is run right after fvwm is done reading
# the config file. This function run after each restart
# so using Test (Init) or Test (Restart) can further control
# actions that are run during the first time run (Init) or
# actions that are run after a restart.
DestroyFunc StartFunction
AddToFunc   StartFunction
+ I Exec exec xwallpaper --stretch $[FVWM_USERDIR]/foggc.png
+ I Module FvwmPager 0 3
+ I Module FvwmConsole -terminal xterm
+ I Exec exec xkbcomp -I$HOME/.xkb/ $HOME/.xkb/keymap/xkbtest $DISPLAY
+ I GotoPage 0 0

DestroyFunc InitFunction
AddToFunc   InitFunction
+ I Exec exec emacs
+ I Exec exec xwallpaper --stretch $[FVWM_USERDIR]/foggc.png
+ I Exec exec env LC_CTYPE=en_US.UTF-8 xterm -name RealXTerm -e \
  $HOME/bin/tmuxattachornew
+ I Exec exec xterm -name grdc -e $HOME/bin/grdc
+ I Exec exec xidle -no -timeout 540 -program "$HOME/bin/mysuspend"

# Mouse Bindings Functions
DestroyFunc RaiseMoveX
AddToFunc RaiseMoveX
+ I Raise
+ M $0
+ D $1

DestroyFunc RaiseMove
AddToFunc RaiseMove
+ I Raise
+ M $0

DestroyFunc MoveToCurrent
AddToFunc MoveToCurrent
+ I ThisWindow MoveToPage
+ I ThisWindow MoveToDesk

DestroyFunc StatusBarOn
AddToFunc   StatusBarOn
+ I Style grdc StaysOnTop
+ I Style FvwmPager StaysOnTop
+ I Style FvwmConsole StaysOnTop
+ I Next (FvwmConsole) Focus
+ I Key M A CSM Function StatusBarOff

DestroyFunc StatusBarOff
AddToFunc   StatusBarOff
+ I Prev (*) Focus
+ I Style grdc StaysOnBottom
+ I Style FvwmPager StaysOnBottom
+ I Style FvwmConsole StaysOnBottom
+ I Key M A CSM Function StatusBarOn

# Comment out the next two block if you don't need Russian stuff
DestroyFunc SwitchToEnglish
AddToFunc SwitchToEnglish
+ I Exec exec xkbcomp -I$HOME/.xkb/ $HOME/.xkb/keymap/xkbtest $DISPLAY
+ I Key Slash A CSM Function SwitchToRussian

DestroyFunc SwitchToRussian
AddToFunc SwitchToRussian
+ I Key Slash A CSM Function SwitchToEnglish
+ I Exec exec setxkbmap -layout us -variant rus

DestroyFunc WindowListFunc
AddToFunc   WindowListFunc
+ I Iconify off
+ I FlipFocus
+ I Raise

DestroyFunc GoToWindow
AddToFunc GoToWindow
+ I Iconify off
+ I FlipFocus
+ I Raise

#############
# 2: Styles #
#############

# Desktops and Pages
#
# Fvwm has both Virtual Desktops and Pages. Each Desktop is built from
# a grid of Pages. The following sets the name of four Desktops and then
# divides each Desktop into a 2x2 grid of Pages that are positioned as
#
#   +---+---+
#   |   |   |
#   +---+---+
#   |   |   |
#   +---+---+
#
DesktopName 0 Main
DesktopName 1 Desk1
DesktopName 2 Desk2
DesktopName 3 Desk3
DesktopSize 2x2

# EdgeScroll will move the view port between the Pages when the mouse
# moves to the edge of the screen. This set the amount of distance to
# scroll at 100% (full page) and the EdgeResistance which is a timer
# for how long the mouse as at the edge before it scrolls.
#
# Set EdgeScroll 0 0 and/or EdgeResistance -1 to disable.
EdgeScroll 100 100
EdgeResistance 100
EdgeThickness 1
Style * EdgeMoveDelay 350, EdgeMoveResistance 350

# EwmhBaseStruts [left] [right] [top] [bottom]
# Reserves space along the edge(s) of the Screen that will not
# be covered when maximizing or placing windows.
EwmhBaseStruts 0 0 0 0

# This sets the ClickTime and MoveThreshold used to determine
# Double Clicks, Hold and Move for the mouse.
ClickTime 250
MoveThreshold 3

# Sets the focus style to SloppyFocus and a mouse click
# in a window will Raise it.
Style * SloppyFocus, MouseFocusClickRaises

# Default Font
DefaultFont "xft:Sans:Bold:size=16:antialias=True"

# Window Placement
Style * MinOverlapPlacement, GrabFocusOff, !UsePPosition

# Sets all windows to OpaqueMove (vs a wired frame) and  windows will
# snap to each other and the edge of the screen.
OpaqueMoveSize unlimited
Style * ResizeOpaque, SnapAttraction 15 SameType ScreenAll, SnapGrid

# Transient Windows (such as open file windows)
Style * DecorateTransient, StackTransientParent
Style * !FPGrabFocusTransient, FPReleaseFocusTransient

# WindowShade
Style * WindowShadeScrolls, WindowShadeSteps 10

# Ignore Numlock and other modifiers for bindings
# See http://fvwm.org/documentation/faq/#why-do-numlock-capslock-and-scrolllock-interfere-with-clicktofocus-andor-my-mouse-bindings
IgnoreModifiers L25

# Decor Styles
Style * BorderWidth 5, HandleWidth 5, MWMButtons, FvwmBorder, FirmBorder
Style * Colorset 1, HilightColorset 2
Style * BorderColorset 3, HilightBorderColorset 4

# Disable Icons from appearing on desktop.
# Comment this out or use Style * Icon to get the icons back.
Style * !Icon

# Window Specific Styles
Style FvwmIdent WindowListSkip
Style FvwmConsole !Title, Borders, Sticky, StaysOnBottom, BorderColorset 4, \
      HighlightBorderColorset 4, WindowListSkip
Style RealXTerm MiniIcon $[FVWM_USERDIR]/xterm.png, !Title, \
      !Borders, StartsOnPage 0 0
Style Emacs !Title, Borders, Handles, StartsOnPage 0 0
Style firefox-default !Title, !Borders, StartsOnPage 0 1, SkipMapping
Style "Tor Browser" StartsOnPage 0 1, SkipMapping, !Title
Style Shotcut StartsOnPage 1 0, SkipMapping
Style Audacity StartsOnPage 1 0, SkipMapping
Style FvwmPager WindowListSkip, Sticky, StaysOnBottom, !Title, Borders, \
      BorderColorset 4, HighlightBorderColorset 4, ClickToFocus
Style /dev/video0 !Title, !Borders, Sticky, StaysOnTop, WindowListSkip
Style grdc MiniIcon "", !Title, Borders, Sticky, StaysOnBottom, WindowListSkip, \
      BorderColorset 4, HighlightBorderColorset 4, NeverFocus
Style Kicad StartsOnPage 1 1, SkipMapping
Style Gimp MiniIcon $[FVWM_USERDIR]/gimp.png, !Title, SkipMapping, \
      StartsOnPage 1 0

#######
# 3: Colorsets
#
# Colorsets can be used to configure the color of the various
# parts of fvwm such as window decor, menus, modules, etc.
#
# Colorset Convention
#
#   0 - Default
#   1 - Inactive Windows
#   2 - Active Window
#   3 - Inactive Windows Borders
#   4 - Active Windows Borders
#   5 - Menu - Inactive Item
#   6 - Menu - Active Item
#   7 - Menu - Grayed Item
#   8 - Menu - Title
#   9 - Reserved
#  10+ Modules
#      10 - Module Default
#      11 - Module Hilight
#      12 - Module ActiveButton (Mouse Hover)
#      13 - FvwmPager Active Page
#      14 - FvwmIconMan Iconified Button
###########
# Colorset notes:
# #eeeeec - whitish || #2e3436 - slate/bg || #555753 - lighter slate
# #4d4d4d - another light slate || #676767 - another light slate
# ones with the same on all are lightish slates
# #ce5c00 - orange border || #d3d7cf - whitish
# #006c6c - dark teal || #003c3c - darker teal
# #73d216 - this comment color green
Colorset 0  fg #eeeeec, bg #2e3436, hi, sh, Plain, NoShape
Colorset 1  fg #eeeeec, bg #555753, hi, sh, Plain, NoShape
Colorset 2  fg #eeeeec, bg #555753, hi, sh, Plain, NoShape
Colorset 3  fg black, bg #4d4d4d, hi #676767, sh #303030, Plain, NoShape
Colorset 4  fg black, bg #ce5c00, hi #ce5c00, sh #101010, Plain, NoShape
Colorset 5  fg #000000, bg #ffffff, hi, sh, Plain, NoShape
Colorset 6  fg #ffffff, bg #2d2d2d, hi, sh, Plain, NoShape
Colorset 7  fg grey30, bg #ffffff, hi, sh, Plain, NoShape
Colorset 8  fg #eeeeec, bg #2e3436, hi #aaaaaa, sh #999999, Plain, NoShape
Colorset 10 fg #eeeeec, bg #555753, hi #aaaaaa, sh #999999, Plain, NoShape
Colorset 11 fg #2e3436, bg #d3d7cf, hi #ffffff, sh #ffffff, Plain, NoShape
Colorset 12 fg #eeeeec, bg #2e3436, hi, sh, Plain, NoShape
Colorset 13 fg #ffffff, bg #006c6c, hi, sh, Plain, NoShape
Colorset 14 fg #555555, bg #003c3c, hi #aaaaaa, sh #999999, Plain, NoShape
Colorset 15 fg #eeeeec, bg #2e3436, hi #aaaaaa, sh #999999, Plain, NoShape
Colorset 16 fg #eeeeec, bg #555753, hi #aaaaaa, sh #999999, Plain, NoShape
Colorset 16 fg #73d216, bg #555753, hi #aaaaaa, sh #999999, Plain, NoShape

#######
# 4: Menus
###########
MenuStyle * MenuColorset 15, ActiveColorset 11, GreyedColorset 7, TitleColorset 8
MenuStyle * Hilight3DOff, HilightBack, HilightTitleBack, SeparatorsLong
MenuStyle * TrianglesSolid, TrianglesUseFore
MenuStyle * ItemFormat "%|%3.1i%5.3l%5.3>%|"
MenuStyle * Font "xft:Sans:Bold:size=24:antialias=True"
MenuStyle * AutomaticHotKeys

# Root Menu
#
# The root menu will PopUp with a click in the root
# window or using alt-f1 (or menu).
DestroyMenu MenuFvwmRoot
AddToMenu   MenuFvwmRoot "Fvwm" Title
+ "Au&dacity%$[FVWM_USERDIR]/audacity.png%" Exec exec audacity
+ "E&macs%$[FVWM_USERDIR]/emacs.png%" Exec exec emacs
+ "&Firefox%$[FVWM_USERDIR]/firefox.png%" Exec exec firefox -offline
+ "&Gimp%$[FVWM_USERDIR]/gimp.png%" Exec exec gimp
+ "Kic&ad%$[FVWM_USERDIR]/kicad.png%" Exec exec kicad
+ "&Shotcut%$[FVWM_USERDIR]/shotcut.png%" Exec exec shotcut --fullscreen
+ "Ter&minal%$[FVWM_USERDIR]/xterm.png%" Exec exec env LC_CTYPE=en_US.UTF-8 \
  xterm -name RealXTerm
+ "Tor-Bro&wser%$[FVWM_USERDIR]/tor16.png%" Exec exec tor-browser
+ "" Nop
+ "Window&Ops%icons/apps.png%" Popup MenuWindowOps
+ "" Nop
+ "English%icons/apps.png%" Exec exec xkbcomp -I$HOME/.xkb/ \
  $HOME/.xkb/keymap/xkbtest $DISPLAY
+ "R&ussian%icons/apps.png%" Exec exec setxkbmap ru
+ "" Nop
+ "&Restart%icons/restart.png%" Restart
+ "Quit%icons/quit.png%" Quit

# Generate XDGMenu
PipeRead "fvwm-menu-desktop -e"

# Window Operations Menus
DestroyMenu MenuWindowOps
AddToMenu   MenuWindowOps
+ "Send To"   Popup MenuSendTo
+ "&Move"      Move
+ "Resize"    Resize
+ "Iconify"   Iconify
+ "Maximize"  Maximize
+ "Shade"     WindowShade
+ "Stick"     Stick
+ "" Nop
+ "Close"     Close
+ "More..."   Menu MenuWindowOpsLong This 0 0

DestroyMenu MenuWindowOpsLong
AddToMenu   MenuWindowOpsLong
+ "Send To"             Popup MenuSendTo
+ "Move"                Move
+ "Resize"              Resize
+ "(De)Iconify"         Iconify
+ "(Un)Maximize"        Maximize
+ "(Un)Shade"           WindowShade
+ "(Un)Sticky"		Stick
+ "(No)TitleBar"	Pick (CirculateHit) ToggleTitle
+ "" Nop
+ "Close"               Close
+ "Destroy"             Destroy
+ "" Nop
+ "Raise"		Raise
+ "Lower"		Lower
+ "" Nop
+ "StaysOnTop"          Pick (CirculateHit) Layer 0 6
+ "StaysPut"            Pick (CirculateHit) Layer 0 4
+ "StaysOnBottom"       Pick (CirculateHit) Layer 0 2
+ "" Nop
+ "Identify"            Module FvwmIdent

DestroyMenu MenuSendTo
AddToMenu MenuSendTo
+ "Current" MoveToCurrent
+ "Page" PopUp MenuSendToPage
+ "Desk" PopUp MenuSendToDesk

DestroyMenu MenuSendToDesk
AddToMenu   MenuSendToDesk
+ "Desk 0"	MoveToDesk 0 0
+ "Desk 1"	MoveToDesk 0 1
+ "Desk 2"	MoveToDesk 0 2
+ "Desk 3"	MoveToDesk 0 3

DestroyMenu MenuSendToPage
AddToMenu   MenuSendToPage
+ "Page (0,0)"	MoveToPage 0 0
+ "Page (0,1)"	MoveToPage 0 1
+ "Page (1,0)"	MoveToPage 1 0
+ "Page (1,1)"	MoveToPage 1 1

#######
# 5: Mouse and Key bindings
#
# Contexts:
#     R = Root Window                 rrrrrrrrrrrrrrrrrrrrrr
#     W = Application Window          rIrrrr<---------^rrrrr
#     F = Frame Corners               rrrrrr[13TTTT642]rrrrr
#     S = Frame Sides                 rIrrrr[wwwwwwwww]rrrrr
#     T = Title Bar                   rrrrrr[wwwwwwwww]rrrrr
#     I = Icon                        rIrrrrv_________>rrrrr
#                                     rrrrrrrrrrrrrrrrrrrrrr
#
#     Numbers are buttons: [1 3 5 7 9  TTTTT  0 8 6 4 2]
#
# Modifiers: (A)ny, (C)ontrol, (S)hift, (M)eta, (N)othing
#
# Format: Key <X>  <Context> <Modifier> <Action>
#         Mouse <X> <Context> <Modifier> <Action>
####################

# Alt-F1 or Menu to load the root menu and Alt-Tab for a WindowList.
# Ctrl-F1/F2/F3/F4 will switch between the Virtual Desktops.
# Super_R (windows key) will launch a terminal.
#
# Silent supresses any errors (such as keyboards with no Menu key).
Silent Key Slash A CS Menu MenuFvwmRoot Root c c # noemacsconflict
Silent Key Slash A CSM Function SwitchToRussian
Silent Key M	 A CSM Function StatusBarOn # noemacsconflict
Silent Key X	 A CSM Close
Silent Key W	 A CSM Move
Silent Key Q	 A CSM Resize
Key    BackSpace M A   -
Key    Space 	 M A   MenuClose

# noemacsconflict
Silent Key Tab A M WindowList Root c c NoDeskSort, CurrentAtEnd, \
       SelectOnRelease Meta_L 

#Key Tab A M -
Silent Key N W CS Module FvwmIdent # noemacsconflict
# Scrolling
# all scrolling noemacsconflict
Silent Key L A CS Scroll 100 0
Silent Key H A CS Scroll -100 0
Silent Key J A CS Scroll 0 100
Silent Key K A CS Scroll 0 -100
# Maximizing & Mouse movement
Key M A CS Maximize # noemacsconflict
Key Semicolon A CS Lower # noemacsconflict
Key P A CS Iconify #noemacsconflict

# noemacsconflict
Key C A CS WindowId root 1 WarpToWindow 50 50
Key H A MS CursorMove -10 0
Key Y A CS CursorMove -1 0
Key L A MS CursorMove 10 0
Key O A CS CursorMove 1 0
Key K A MS CursorMove 0 -10
Key I A CS CursorMove 0 -1
Key J A MS CursorMove 0 10
Key U A CS CursorMove 0 1
# Desktop Management (actually I want this)
# noemacsconflict
Silent Key L A CSM GotoDesk 1 0 3
Silent Key H A CSM GotoDesk -1 0 3

# Window Buttons: [1 3 5 7 9  TTTTT  0 8 6 4 2]
#   1 - Open the WindowOps menu.
#   2 - Close on single click, Destory on double click.
#   4 - Maximize (right/middle button will only maximize vertical/horizontal)
#   6 - Iconify (minimize)
Mouse 1 1 A Menu MenuWindowOps Delete
Mouse 1 2 A Close
Mouse 1 4 A Maximize 100 100
Mouse 2 4 A Maximize 0 100
Mouse 3 4 A Maximize 100 0
Mouse 1 6 A Iconify

#   TitleBar: Click to Raise, Move, Double Click to Maximize
#             Mouse Wheel Up/Down to WindowShade On/Off
#   Borders: Click to raise, Move to Resize
#   Root Window: Left Click - Main Menu
#                Right Click - WindowOps Menu
#                Middle Click - Window List Menu
#   Right click TitleBar/Borders for WindowOps Menu
Mouse 1	T    A RaiseMoveX Move Maximize
Mouse 1	FS   A RaiseMove Resize
Mouse 4	T    A WindowShade True
Mouse 5	T    A WindowShade False
Mouse 1	R    A Menu MenuFvwmRoot
Mouse 2	R    A WindowList
Mouse 3	R    A Menu MenuWindowOpsLong
Mouse 1	I    A RaiseMoveX Move "Iconify off"
Mouse 3	T    A Menu MenuWindowOps
Mouse 3 I    A Menu MenuIconOps

#######
# 6: Window Decor
#
# Buttons Locations: [1 3 5 7 9  TTTTT  0 8 6 4 2]
#
#   1 - WindowOps Menu
#   2 - Close
#   4 - Maximize
#   6 - Minimize
###########
TitleStyle Centered Height 18 -- Flat
ButtonStyle All ActiveUp Vector 5 15x15@4 15x85@3 85x85@3 85x15@3 \
                15x15@3 -- Flat
ButtonStyle All ToggledActiveUp Vector 5 15x15@4 15x85@3 85x85@3 \
                85x15@3 15x15@3 -- Flat
ButtonStyle All ActiveDown Vector 5 20x20@4 20x80@3 80x80@3 80x20@3 \
                20x20@3 -- Flat
ButtonStyle All ToggledActiveDown Vector 5 20x20@4 20x80@3 80x80@3 \
                80x20@3 20x20@3 -- Flat
ButtonStyle All ToggledInactive Vector 5 47x47@3 57x53@3 53x53@3 \
                53x47@3 47x47@3 -- Flat
ButtonStyle All Inactive Vector 5 47x47@3 57x53@3 53x53@3 53x47@3 \
                47x47@3 -- Flat
AddButtonStyle 1 Active Vector 5 45x45@3 55x45@3 55x55@3 45x55@3 45x45@3
AddButtonStyle 2 Active Vector 4 35x35@3 65x65@3 65x35@4 35x65@3
AddButtonStyle 4 Active Vector 8 30x70@3 30x30@3 70x30@3 70x70@3 30x70@3 \
                 30x50@4 50x50@3 50x70@3
AddButtonStyle 4 ToggledActiveUp Vector 8 30x70@3 30x30@3 70x30@3 70x70@3 \
                 30x70@3 50x30@4 50x50@3 70x50@3
AddButtonStyle 6 Active Vector 5 35x60@3 65x60@3 65x50@3 35x50@3 35x60@3
ButtonStyle All - Clear
ButtonStyle 1 - MwmDecorMenu
ButtonStyle 4 - MwmDecorMax
ButtonStyle 6 - MwmDecorMin

############
# 7: Modules
#############

# FvwmIdent
#
# FvwmIdent is a module that can be used to get the various info about
# a window. One use is getting the class/resource/name of a window.
DestroyModuleConfig FvwmIdent:*
*FvwmIdent: Colorset 10
*FvwmIdent: Font "xft:Sans:size=24:antialias=True"

# FvwmPager
#
# This module displays the location of the windows on the various Pages
# and Desks. This is setup to show only the Pages on the current Desk.
DestroyModuleConfig FvwmPager:*
*FvwmPager: Colorset * 15
*FvwmPager: HilightColorset * 4
*FvwmPager: WindowColorsets 10 10
*FvwmPager: Font None
*FvwmPager: Window3dBorders
*FvwmPager: MiniIcons
*FvwmPager: Geometry 484x67+0+0
